# Lab 11

## Task 1

### Command

```
kubectl create secret generic db-user-pass --from-literal=username=admin --from-literal=password='S!B\*d$zDsb='
```

    secret/db-user-pass created


### Command

    kubectl get secrets

```
NAME                               TYPE                 DATA   AGE
db-user-pass                       Opaque               2      83s
sh.helm.release.v1.helm-hooks.v1   helm.sh/release.v1   1      5d21h
```

### Command

    kubectl describe secret db-user-pass

```
Name:         db-user-pass
Namespace:    default
Labels:       <none>
Annotations:  <none>

Type:  Opaque

Data
====
password:  12 bytes
username:  5 bytes
```

### Command

    echo $(kubectl get secret db-user-pass -o jsonpath='{.data}')

```
{"password":"UyFCXCpkJHpEc2I9","username":"YWRtaW4="}
```

### Command

    echo $(echo 'UyFCXCpkJHpEc2I9' | base64 --decode)

```
S!B\*d$zDsb=
```

### Command

    helm plugin install https://github.com/zendesk/helm-secrets

### Command

    gpg --gen-key

### Command

    sops -p PUB_KEY secrets.yaml

### Command

    helm secrets view secrets.yaml


```
password: secret1234
```

### Command

    helm secrets install app-python-helm ./app-python-helm/ -n default -f ./secrets.yaml

```
NAME: app-python-helm
LAST DEPLOYED: Tue Nov 14 22:08:23 2023
NAMESPACE: default
STATUS: deployed
REVISION: 1
NOTES:
1. Get the application URL by running these commands:
     NOTE: It may take a few minutes for the LoadBalancer IP to be available.
           You can watch the status of by running 'kubectl get --namespace default svc -w app-python-helm'
  export SERVICE_IP=$(kubectl get svc --namespace default app-python-helm --template "{{ range (index .status.loadBalancer.ingress 0) }}{{.}}{{ end }}")
  echo http://$SERVICE_IP:5000
removed './secrets.yaml.dec'
```

### Command

    kubectl exec app-python-helm-rsfg490j21f-ebpsk -- printenv | grep MY_PASSWORD

```
MY_PASSWORD=secret1234
```
